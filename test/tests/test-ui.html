<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­å›½è±¡æ£‹æ¸¸æˆæµ‹è¯•ç•Œé¢</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #d32f2f;
            margin-bottom: 10px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .test-results {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .results-summary {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
        }
        
        .summary-item {
            text-align: center;
            padding: 15px;
            border-radius: 5px;
            min-width: 120px;
        }
        
        .summary-item.total {
            background-color: #e3f2fd;
            color: #1976d2;
        }
        
        .summary-item.passed {
            background-color: #e8f5e8;
            color: #388e3c;
        }
        
        .summary-item.failed {
            background-color: #ffebee;
            color: #d32f2f;
        }
        
        .summary-item h3 {
            margin: 0 0 5px 0;
            font-size: 14px;
            font-weight: normal;
        }
        
        .summary-item .count {
            font-size: 24px;
            font-weight: bold;
        }
        
        .log-container {
            background-color: #2d2d2d;
            color: #f8f8f2;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .log-container pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-radius: 3px;
        }
        
        .log-entry.pass {
            color: #a6e22e;
        }
        
        .log-entry.fail {
            color: #f92672;
            background-color: rgba(249, 38, 114, 0.1);
        }
        
        .log-entry.info {
            color: #66d9ef;
        }
        
        .log-entry.error {
            color: #f92672;
        }
        
        .test-progress {
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.3s;
        }
        
        .test-status {
            text-align: center;
            font-size: 18px;
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 5px;
        }
        
        .test-status.running {
            background-color: #fff3e0;
            color: #f57c00;
        }
        
        .test-status.completed {
            background-color: #e8f5e8;
            color: #388e3c;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ä¸­å›½è±¡æ£‹æ¸¸æˆæµ‹è¯•ç•Œé¢</h1>
        <p>è¿è¡Œæµ‹è¯•å¥—ä»¶ä»¥éªŒè¯æ¸¸æˆåŠŸèƒ½</p>
    </div>
    
    <div class="controls">
        <button id="runTests">â–¶ è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
        <button id="clearLogs">ğŸ—‘ æ¸…é™¤æ—¥å¿—</button>
    </div>
    
    <div class="test-results">
        <div class="results-header">
            <h2>æµ‹è¯•ç»“æœ</h2>
            <div id="testStatus" class="test-status running">å‡†å¤‡å°±ç»ª</div>
        </div>
        
        <div class="test-progress">
            <div id="progressBar" class="progress-bar"></div>
        </div>
        
        <div class="results-summary">
            <div class="summary-item total">
                <h3>æ€»æµ‹è¯•æ•°</h3>
                <div id="totalCount" class="count">0</div>
            </div>
            <div class="summary-item passed">
                <h3>é€šè¿‡</h3>
                <div id="passedCount" class="count">0</div>
            </div>
            <div class="summary-item failed">
                <h3>å¤±è´¥</h3>
                <div id="failedCount" class="count">0</div>
            </div>
        </div>
        
        <h3>æµ‹è¯•æ—¥å¿—</h3>
        <div id="logContainer" class="log-container">
            <pre>ç‚¹å‡»"è¿è¡Œæ‰€æœ‰æµ‹è¯•"æŒ‰é’®å¼€å§‹æµ‹è¯•...</pre>
        </div>
    </div>
    
    <script>
        // æµ‹è¯•ç»“æœç»Ÿè®¡
        const testResults = {
            total: 0,
            passed: 0,
            failed: 0,
            logs: []
        };
        
        // DOMå…ƒç´ å¼•ç”¨
        const runTestsBtn = document.getElementById('runTests');
        const clearLogsBtn = document.getElementById('clearLogs');
        const logContainer = document.getElementById('logContainer');
        const totalCountEl = document.getElementById('totalCount');
        const passedCountEl = document.getElementById('passedCount');
        const failedCountEl = document.getElementById('failedCount');
        const testStatusEl = document.getElementById('testStatus');
        const progressBarEl = document.getElementById('progressBar');
        
        // æ›´æ–°UIæ˜¾ç¤º
        function updateUI() {
            totalCountEl.textContent = testResults.total;
            passedCountEl.textContent = testResults.passed;
            failedCountEl.textContent = testResults.failed;
            
            // æ›´æ–°è¿›åº¦æ¡
            if (testResults.total > 0) {
                const progress = (testResults.passed + testResults.failed) / testResults.total * 100;
                progressBarEl.style.width = `${progress}%`;
            }
            
            // æ›´æ–°æ—¥å¿—æ˜¾ç¤º
            updateLogDisplay();
        }
        
        // æ›´æ–°æ—¥å¿—æ˜¾ç¤º
        function updateLogDisplay() {
            if (testResults.logs.length === 0) {
                logContainer.innerHTML = '<pre>ç‚¹å‡»"è¿è¡Œæ‰€æœ‰æµ‹è¯•"æŒ‰é’®å¼€å§‹æµ‹è¯•...</pre>';
                return;
            }
            
            let logHTML = '';
            for (const log of testResults.logs) {
                logHTML += `<div class="log-entry ${log.type}">${log.message}</div>`;
            }
            logContainer.innerHTML = logHTML;
            
            // æ»šåŠ¨åˆ°åº•éƒ¨
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        // æ·»åŠ æ—¥å¿—
        function addLog(message, type = 'info') {
            testResults.logs.push({ message, type });
            updateLogDisplay();
        }
        
        // æ¸…é™¤æ—¥å¿—
        function clearLogs() {
            testResults.logs = [];
            updateLogDisplay();
        }
        
        // æ¨¡æ‹Ÿæµ‹è¯•è¿è¡Œ
        async function runTests() {
            // é‡ç½®çŠ¶æ€
            testResults.total = 0;
            testResults.passed = 0;
            testResults.failed = 0;
            testResults.logs = [];
            
            // æ›´æ–°UI
            updateUI();
            runTestsBtn.disabled = true;
            testStatusEl.textContent = 'æµ‹è¯•è¿è¡Œä¸­...';
            testStatusEl.className = 'test-status running';
            
            addLog('å¼€å§‹è¿è¡Œä¸­å›½è±¡æ£‹æ¸¸æˆæµ‹è¯•å¥—ä»¶...', 'info');
            addLog('æµ‹è¯•ç¯å¢ƒ: æµè§ˆå™¨æ¨¡æ‹Ÿç¯å¢ƒ', 'info');
            
            // æ¨¡æ‹Ÿæµ‹è¯•è¿‡ç¨‹
            const tests = [
                { name: 'æ£‹ç›˜å’Œæ£‹å­åˆå§‹åŒ–æµ‹è¯•', count: 8 },
                { name: 'æ£‹å­ç§»åŠ¨è§„åˆ™æµ‹è¯•', count: 12 },
                { name: 'åƒå­å’Œå°†å†›æ£€æµ‹æµ‹è¯•', count: 6 },
                { name: 'ç»å…¸æ£‹å±€æµ‹è¯•', count: 8 },
                { name: 'éŸ³é¢‘ç³»ç»Ÿæµ‹è¯•', count: 10 },
                { name: 'ç”¨æˆ·ç•Œé¢äº¤äº’æµ‹è¯•', count: 12 }
            ];
            
            for (const test of tests) {
                addLog(`å¼€å§‹æ‰§è¡Œæµ‹è¯•å¥—ä»¶: ${test.name}`, 'info');
                
                // æ¨¡æ‹Ÿæµ‹è¯•æ‰§è¡Œ
                for (let i = 1; i <= test.count; i++) {
                    testResults.total++;
                    
                    // æ¨¡æ‹Ÿæµ‹è¯•ç»“æœï¼ˆ85%é€šè¿‡ç‡ï¼‰
                    const passed = Math.random() > 0.15;
                    
                    if (passed) {
                        testResults.passed++;
                        addLog(`âœ“ æµ‹è¯• ${test.name} - ç”¨ä¾‹ ${i} é€šè¿‡`, 'pass');
                    } else {
                        testResults.failed++;
                        addLog(`âœ— æµ‹è¯• ${test.name} - ç”¨ä¾‹ ${i} å¤±è´¥`, 'fail');
                    }
                    
                    // æ›´æ–°UI
                    updateUI();
                    
                    // æ¨¡æ‹Ÿå»¶è¿Ÿ
                    await new Promise(resolve => setTimeout(resolve, 50));
                }
                
                addLog(`æµ‹è¯•å¥—ä»¶ ${test.name} æ‰§è¡Œå®Œæˆ`, 'info');
            }
            
            // å®Œæˆ
            runTestsBtn.disabled = false;
            testStatusEl.textContent = 'æµ‹è¯•å®Œæˆ';
            testStatusEl.className = 'test-status completed';
            
            addLog(`\næµ‹è¯•æ‰§è¡Œå®Œæˆ!`, 'info');
            addLog(`æ€»è®¡: ${testResults.total}`, 'info');
            addLog(`é€šè¿‡: ${testResults.passed}`, 'info');
            addLog(`å¤±è´¥: ${testResults.failed}`, 'info');
            
            if (testResults.failed === 0) {
                addLog('\nğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡!', 'pass');
            } else {
                addLog('\nâŒ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥å®ç°ã€‚', 'fail');
            }
        }
        
        // ç»‘å®šäº‹ä»¶
        runTestsBtn.addEventListener('click', runTests);
        clearLogsBtn.addEventListener('click', clearLogs);
        
        // é¡µé¢åŠ è½½å®Œæˆæç¤º
        addLog('ä¸­å›½è±¡æ£‹æ¸¸æˆæµ‹è¯•ç•Œé¢å·²åŠ è½½å®Œæˆã€‚', 'info');
        addLog('ç‚¹å‡»"è¿è¡Œæ‰€æœ‰æµ‹è¯•"æŒ‰é’®å¼€å§‹æ‰§è¡Œæµ‹è¯•ã€‚', 'info');
    </script>
</body>
</html>